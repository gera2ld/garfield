<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Dashboard - Web Commander</title>
  <link rel="shortcut icon" href="./_static/favicon.ico" type="image/x-icon">
  <link rel="icon" href="./_static/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="//cdn.bootcss.com/spectre.css/0.1.27/spectre.min.css">
  <link rel="stylesheet" href="./_static/style.css">
  <script src="//cdn.bootcss.com/socket.io/1.4.8/socket.io.min.js"></script>
  <script src="//cdn.bootcss.com/vue/2.0.3/vue.js"></script>
  <script src="./_static/define.js"></script>
  <script src="./_static/app.js"></script>
</head>
<body>
  <h1>Web Commander</h1>
  <div id="dashboard"></div>
<script id="tpl-app" type="x-template">
  <div class="container grid-960">
    <div class="columns col-multiline">
      <div class="column col-4 col-sm-6 col-xs-12" v-for="item in jobs">
        <div class="card" :key="item.id">
          <div class="card-header state-text">
            <h4 class="card-title" v-text="item.description"></h4>
            <div class="float-right state-text" :class="'state-'+item.state" v-text="item.state"></div>
            <div class="card-meta">
              [<span v-text="item.id"></span>]
              <span class="tooltip text-nowrap" v-text="duration(item)" :data-tooltip="timestamps(item)"></span>
            </div>
          </div>
          <div class="card-footer clearfix">
            <button class="btn btn-default btn-sm text-uppercase float-right" v-if="item.hasLogs" @click="showLog(item)">Log</button>
            <button class="btn btn-primary btn-sm" v-if="canRedo(item)" @click="redo(item)">Redo</button>
          </div>
        </div>
      </div>
    </div>
    <div class="empty" v-if="!jobs.length">
    <p class="empty-title">No task yet~</p>
    </div>
    <modal :class="{active:modal}" :item="modal" @close="closeLog"></modal>
  </div>
</script>
<script id="tpl-modal" type="x-template">
  <div class="modal">
    <div class="modal-overlay" @click="close"></div>
    <div class="modal-container">
      <div class="modal-header">
        <div class="modal-title" v-text="item&&item.description"></div>
      </div>
      <div class="modal-body log-view" v-html="item&&item.log" ref="body"></div>
    </div>
  </div>
</script>
</body>
</html>
